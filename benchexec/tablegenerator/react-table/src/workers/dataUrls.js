// This file is part of BenchExec, a framework for reliable benchmarking:
// https://github.com/sosy-lab/benchexec
//
// SPDX-FileCopyrightText: 2019-2020 Dirk Beyer <https://www.sosy-lab.org>
//
// SPDX-License-Identifier: Apache-2.0

const stats =
  "data:text/plain;base64,Ly8gVGhpcyBmaWxlIGlzIHBhcnQgb2YgQmVuY2hFeGVjLCBhIGZyYW1ld29yayBmb3IgcmVsaWFibGUgYmVuY2htYXJraW5nOgovLyBodHRwczovL2dpdGh1Yi5jb20vc29zeS1sYWIvYmVuY2hleGVjCi8vCi8vIFNQRFgtRmlsZUNvcHlyaWdodFRleHQ6IDIwMTktMjAyMCBEaXJrIEJleWVyIDxodHRwczovL3d3dy5zb3N5LWxhYi5vcmc+Ci8vCi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wCgovLyBDT1BZIE9GIHV0aWxzLmpzLCBhcyBpbXBvcnRzIHdpbGwgbm90IHdvcmsgaGVyZQovKioKICogRnVuY3Rpb24gdG8gc2FmZWx5IGFkZCB0d28gbnVtYmVycyBpbiBhIHdheSB0aGF0IHNob3VsZCBtaXRpZ2F0ZSBlcnJvcnMKICogY2F1c2VkIGJ5IGluYWNjdXJhdGUgZmxvYXRpbmcgcG9pbnQgb3BlcmF0aW9ucyBpbiBqYXZhc2NyaXB0CiAqIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30gYSAtIFRoZSBiYXNlIG51bWJlcgogKiBAcGFyYW0ge051bWJlcnxTdHJpbmd9IGIgLSBUaGUgbnVtYmVyIHRvIGFkZAogKgogKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgcmVzdWx0IG9mIHRoZSBhZGRpdGlvbgogKi8KY29uc3Qgc2FmZUFkZCA9IChhLCBiKSA9PiB7CiAgbGV0IGFOdW0gPSBhOwogIGxldCBiTnVtID0gYjsKCiAgaWYgKHR5cGVvZiBhID09PSAic3RyaW5nIikgewogICAgYU51bSA9IE51bWJlcihhKTsKICB9CiAgaWYgKHR5cGVvZiBiID09PSAic3RyaW5nIikgewogICAgYk51bSA9IE51bWJlcihiKTsKICB9CgogIGlmIChOdW1iZXIuaXNJbnRlZ2VyKGFOdW0pIHx8IE51bWJlci5pc0ludGVnZXIoYk51bSkpIHsKICAgIHJldHVybiBhTnVtICsgYk51bTsKICB9CgogIGNvbnN0IGFTdHJpbmcgPSBhLnRvU3RyaW5nKCk7CiAgY29uc3QgYUxlbmd0aCA9IGFTdHJpbmcubGVuZ3RoOwogIGNvbnN0IGFEZWNpbWFsUG9pbnQgPSBhU3RyaW5nLmluZGV4T2YoIi4iKTsKICBjb25zdCBiU3RyaW5nID0gYi50b1N0cmluZygpOwogIGNvbnN0IGJMZW5ndGggPSBiU3RyaW5nLmxlbmd0aDsKICBjb25zdCBiRGVjaW1hbFBvaW50ID0gYlN0cmluZy5pbmRleE9mKCIuIik7CgogIGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KGFMZW5ndGggLSBhRGVjaW1hbFBvaW50LCBiTGVuZ3RoIC0gYkRlY2ltYWxQb2ludCkgLSAxOwoKICByZXR1cm4gTnVtYmVyKChhTnVtICsgYk51bSkudG9GaXhlZChsZW5ndGgpKTsKfTsKCmNvbnN0IG1hdGhTdHJpbmdNYXggPSAoYSwgYikgPT4gewogIGNvbnN0IG51bUEgPSBOdW1iZXIoYSk7CiAgY29uc3QgbnVtQiA9IE51bWJlcihiKTsKICByZXR1cm4gbnVtQSA+IG51bUIgPyBhIDogYjsKfTsKCmNvbnN0IG1hdGhTdHJpbmdNaW4gPSAoYSwgYikgPT4gewogIGNvbnN0IG51bUEgPSBOdW1iZXIoYSk7CiAgY29uc3QgbnVtQiA9IE51bWJlcihiKTsKICByZXR1cm4gbnVtQSA8IG51bUIgPyBhIDogYjsKfTsKCi8qKgogKiBUaGlzIGZ1bmN0aW9uIGVpdGhlciBhZGRzIHR3byBudW1iZXJzIG9yIGluY3JlbWVudHMgdGhlIG51bWJlcgogKiBwYXNzZWQgaW4gdGhlIGZpcnN0IHBhcmFtZXRlciBpZiB0aGUgdHlwZSBpcyAic3RhdHVzIi4KICogSWYgdGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgbm90IGEgbnVtYmVyIGFuZCB0aGUgdHlwZSBpcyBub3Qgc3RhdHVzLAogKiB0aGUgZmlyc3QgcGFyYW1ldGVyIHdpbGwgYmUgcmV0dXJuZWQKICoKICogQHBhcmFtIHtOdW1iZXJ9IGEKICogQHBhcmFtIHsqfSBiCiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAqLwpjb25zdCBtYXliZUFkZCA9IChhLCBiLCB0eXBlKSA9PiB7CiAgaWYgKE51bWJlcihiKSkgewogICAgcmV0dXJuIHNhZmVBZGQoYSwgYik7CiAgfQogIGlmICh0eXBlID09PSAic3RhdHVzIikgewogICAgcmV0dXJuIGEgKyAxOwogIH0KICByZXR1cm4gYTsKfTsKY29uc3QgcmVtb3ZlUm91bmRPZmYgPSAobnVtKSA9PiB7CiAgY29uc3Qgc3RyID0gbnVtLnRvU3RyaW5nKCk7CiAgaWYgKHN0ci5tYXRjaCgvXC4uKz8wezIsfVxkJC8pKSB7CiAgICByZXR1cm4gTnVtYmVyKHN0ci5zdWJzdHIoMCwgc3RyLmxlbmd0aCAtIDEpKTsKICB9CiAgcmV0dXJuIG51bTsKfTsKCmNvbnN0IGNhbGN1bGF0ZU1lYW4gPSAodmFsdWVzLCBhbGxJdGVtcykgPT4gewogIGNvbnN0IG51bU1pbiA9IE51bWJlcih2YWx1ZXMubWluKTsKICBjb25zdCBudW1NYXggPSBOdW1iZXIodmFsdWVzLm1heCk7CiAgaWYgKG51bU1pbiA9PT0gLUluZmluaXR5ICYmIG51bU1heCA9PT0gSW5maW5pdHkpIHsKICAgIHZhbHVlcy5hdmcgPSAiTmFOIjsKICB9IGVsc2UgaWYgKG51bU1pbiA9PT0gLUluZmluaXR5KSB7CiAgICB2YWx1ZXMuYXZnID0gIi1JbmZpbml0eSI7CiAgfSBlbHNlIGlmIChudW1NYXggPT09IEluZmluaXR5KSB7CiAgICB2YWx1ZXMuYXZnID0gIkluZmluaXR5IjsKICB9IGVsc2UgewogICAgdmFsdWVzLmF2ZyA9IHJlbW92ZVJvdW5kT2ZmKHZhbHVlcy5zdW0gLyBhbGxJdGVtcy5sZW5ndGgpOwogIH0KfTsKCmNvbnN0IGNhbGN1bGF0ZU1lZGlhbiA9ICh2YWx1ZXMsIGFsbEl0ZW1zKSA9PiB7CiAgaWYgKGFsbEl0ZW1zLmxlbmd0aCAlIDIgPT09IDApIHsKICAgIGNvbnN0IGlkeCA9IGFsbEl0ZW1zLmxlbmd0aCAvIDI7CiAgICB2YWx1ZXMubWVkaWFuID0KICAgICAgKE51bWJlcihhbGxJdGVtc1tpZHggLSAxXS5jb2x1bW4pICsgTnVtYmVyKGFsbEl0ZW1zW2lkeF0uY29sdW1uKSkgLyAyLjA7CiAgfSBlbHNlIHsKICAgIHZhbHVlcy5tZWRpYW4gPSBhbGxJdGVtc1tNYXRoLmZsb29yKGFsbEl0ZW1zLmxlbmd0aCAvIDIuMCldLmNvbHVtbjsKICB9Cn07CmNvbnN0IGNhbGN1bGF0ZVN0ZGV2ID0gKGhhc05lZ0luZiwgaGFzUG9zSW5mLCB2YXJpYW5jZSwgc2l6ZSkgPT4gewogIGlmIChoYXNOZWdJbmYgJiYgaGFzUG9zSW5mKSB7CiAgICByZXR1cm4gIk5hTiI7CiAgfQogIGlmIChoYXNOZWdJbmYgfHwgaGFzUG9zSW5mKSB7CiAgICByZXR1cm4gSW5maW5pdHk7CiAgfQogIHJldHVybiBNYXRoLnNxcnQodmFyaWFuY2UgLyBzaXplKTsKfTsKCmNvbnN0IHBhcnNlUHl0aG9uSW5maW5pdHlWYWx1ZXMgPSAoZGF0YSkgPT4KICBkYXRhLm1hcCgoaXRlbSkgPT4gewogICAgaWYgKGl0ZW0uY29sdW1uVHlwZSA9PT0gInN0YXR1cyIgfHwgIWl0ZW0uY29sdW1uLmVuZHNXaXRoKCJJbmYiKSkgewogICAgICByZXR1cm4gaXRlbTsKICAgIH0KICAgIC8vIFdlIGhhdmUgYSBweXRob24gSW5maW5pdHkgdmFsdWUgdGhhdCB3ZSB3YW50IHRvIHRyYW5zZmVyIHRvIGEgc3RyaW5nCiAgICAvLyB0aGF0IGNhbiBiZSBpbnRlcnByZXRlZCBhcyBhIEphdmFTY3JpcHQgSW5maW5pdHkgdmFsdWUKICAgIGl0ZW0uY29sdW1uID0gaXRlbS5jb2x1bW4ucmVwbGFjZSgiSW5mIiwgIkluZmluaXR5Iik7CiAgICByZXR1cm4gaXRlbTsKICB9KTsKCi8vIElmIGEgYnVja2V0IGNvbnRhaW5zIGEgTmFOIHZhbHVlLCB3ZSBjYW4gbm90IHBlcmZvcm0gYW55IHN0YXQgY2FsY3VsYXRpb24KY29uc3Qgc2hvdWxkU2tpcEJ1Y2tldCA9IChidWNrZXRNZXRhLCBrZXkpID0+IHsKICBpZiAoYnVja2V0TWV0YVtrZXldICYmIGJ1Y2tldE1ldGFba2V5XS5oYXNOYU4pIHsKICAgIHJldHVybiB0cnVlOwogIH0KICByZXR1cm4gZmFsc2U7Cn07CgovKioKICogRnVuY3Rpb24gdGhhdCBrZWVwcyB0cmFjayBvZiB0aGUgbWF4IGlucHV0dGVkIGRlY2ltYWwgbGVuZ3RoIG9mIGNvbHVtbiB2YWx1ZXMuCiAqIFRoaXMgaXMgdXNlZCBmb3IgY29uZGl0aW9uYWwgZm9ybWF0dGluZyBpbiB0aGUgc3RhdHMgbW9kdWxlIHRvIGRldGVybWluZSB0aGUgbWF4aW11bQogKiBhbW91bnQgb2YgcGFkZGVkIDBzCiAqCiAqIEB0eXBlZGVmIFVwZGF0ZU1heERlY2ltYWxNZXRhSW5mb1BhcmFtCiAqIEBwYXJhbSB7U3RyaW5nfSBjb2x1bW5UeXBlIC0gVGhlIHR5cGUgb2YgdGhlIGN1cnJlbnQgY29sdW1uCiAqIEBwYXJhbSB7T2JqZWN0fSBjb2x1bW4gLSBUaGUgY29sdW1uIG9iamVjdAogKiBAcGFyYW0ge09iamVjdH0gYnVja2V0IC0gVGhlIGN1cnJlbnQgc3RhdCBidWNrZXQgaW4gY29udGV4dAogKgogKiBAcGFyYW0ge1VwZGF0ZU1heERlY2ltYWxNZXRhSW5mb1BhcmFtfSBwYXJhbQogKi8KY29uc3QgdXBkYXRlTWF4RGVjaW1hbE1ldGFJbmZvID0gKHsgY29sdW1uVHlwZSwgY29sdW1uLCBidWNrZXQgfSkgPT4gewogIGlmIChjb2x1bW5UeXBlICE9PSAic3RhdHVzIikgewogICAgY29uc3QgWywgZGVjaW1hbF0gPSBjb2x1bW4uc3BsaXQoIi4iKTsKICAgIGJ1Y2tldC5tZXRhLm1heERlY2ltYWxzID0gTWF0aC5tYXgoCiAgICAgIGJ1Y2tldC5tZXRhLm1heERlY2ltYWxzLAogICAgICBkZWNpbWFsPy5sZW5ndGggPz8gMCwKICAgICk7CiAgfQp9OwoKb25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsKICBjb25zdCB7IGRhdGEsIHRyYW5zYWN0aW9uIH0gPSBlLmRhdGE7CgogIC8vIHRlbXBsYXRlCiAgY29uc3QgZGVmYXVsdE9iaiA9IHsKICAgIHN1bTogMCwKICAgIGF2ZzogMCwKICAgIG1heDogIi1JbmZpbml0eSIsCiAgICBtZWRpYW46IDAsCiAgICBtaW46ICJJbmZpbml0eSIsCiAgICBzdGRldjogMCwKICAgIHZhcmlhbmNlOiAwLAogIH07CgogIGNvbnN0IG1ldGFUZW1wbGF0ZSA9IHsKICAgIHR5cGU6IG51bGwsCiAgICBtYXhEZWNpbWFsczogMCwKICB9OwoKICAvLyBDb3B5IG9mIHRoZSB0ZW1wbGF0ZSB3aXRoIGFsbCB2YWx1ZXMgcmVwbGFjZWQgd2l0aCBOYU4KICBjb25zdCBuYW5PYmogPSB7IC4uLmRlZmF1bHRPYmogfTsKICBmb3IgKGNvbnN0IG9iaktleSBvZiBPYmplY3Qua2V5cyhuYW5PYmopKSB7CiAgICBuYW5PYmpbb2JqS2V5XSA9ICJOYU4iOwogIH0KCiAgbGV0IGNvcHkgPSBbLi4uZGF0YV0uZmlsdGVyKAogICAgKGkpID0+IGkgJiYgaS5jb2x1bW4gIT09IHVuZGVmaW5lZCAmJiBpLmNvbHVtbiAhPT0gbnVsbCwKICApOwogIGNvcHkgPSBwYXJzZVB5dGhvbkluZmluaXR5VmFsdWVzKGNvcHkpOwoKICBpZiAoY29weS5sZW5ndGggPT09IDApIHsKICAgIC8vIE5vIGRhdGEgdG8gcGVyZm9ybSBjYWxjdWxhdGlvbnMgd2l0aAogICAgcG9zdFJlc3VsdCh7IHRvdGFsOiB1bmRlZmluZWQgfSwgdHJhbnNhY3Rpb24pOwogICAgcmV0dXJuOwogIH0KCiAgY29uc3QgeyBjb2x1bW5UeXBlIH0gPSBjb3B5WzBdOwogIG1ldGFUZW1wbGF0ZS50eXBlID0gY29sdW1uVHlwZTsKCiAgY29weS5zb3J0KChhLCBiKSA9PiBhLmNvbHVtbiAtIGIuY29sdW1uKTsKCiAgY29uc3QgYnVja2V0cyA9IHt9OwogIGNvbnN0IGJ1Y2tldE5hTkluZm8gPSB7fTsgLy8gdXNlZCB0byBzdG9yZSBOYU4gaW5mbyBvZiBidWNrZXRzCgogIGxldCB0b3RhbCA9IHsgLi4uZGVmYXVsdE9iaiwgaXRlbXM6IFtdLCBtZXRhOiB7IC4uLm1ldGFUZW1wbGF0ZSB9IH07CgogIHRvdGFsLm1heCA9IGNvcHlbY29weS5sZW5ndGggLSAxXS5jb2x1bW47CiAgdG90YWwubWluID0gY29weVswXS5jb2x1bW47CgogIGNvbnN0IHRvdGFsTmFOSW5mbyA9IHsKICAgIGhhc05hTjogY29weS5zb21lKChpdGVtKSA9PiB7CiAgICAgIGlmIChpdGVtLmNvbHVtblR5cGUgIT09ICJzdGF0dXMiICYmIGlzTmFOKGl0ZW0uY29sdW1uKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pLAogIH07CgogIC8vIEJ1Y2tldCBzZXR1cCB3aXRoIHN1bSBhbmQgbWluL21heAogIGZvciAoY29uc3QgaXRlbSBvZiBjb3B5KSB7CiAgICBjb25zdCBrZXkgPSBgJHtpdGVtLmNhdGVnb3J5VHlwZX0tJHtpdGVtLnJlc3VsdFR5cGV9YDsKICAgIGNvbnN0IHRvdGFsS2V5ID0gYCR7aXRlbS5jYXRlZ29yeVR5cGV9LXRvdGFsYDsKICAgIGNvbnN0IHsgY29sdW1uVHlwZTogdHlwZSwgY29sdW1uLCBjb2x1bW5UaXRsZTogdGl0bGUgfSA9IGl0ZW07CiAgICBpZiAoIXRvdGFsLnRpdGxlKSB7CiAgICAgIHRvdGFsLnRpdGxlID0gdGl0bGU7CiAgICB9CiAgICBjb25zdCBidWNrZXQgPSBidWNrZXRzW2tleV0gfHwgewogICAgICAuLi5kZWZhdWx0T2JqLAogICAgICB0aXRsZSwKICAgICAgaXRlbXM6IFtdLAogICAgICBtZXRhOiB7IC4uLm1ldGFUZW1wbGF0ZSB9LAogICAgfTsKCiAgICBjb25zdCBzdWJUb3RhbEJ1Y2tldCA9IGJ1Y2tldHNbdG90YWxLZXldIHx8IHsKICAgICAgLi4uZGVmYXVsdE9iaiwKICAgICAgdGl0bGUsCiAgICAgIGl0ZW1zOiBbXSwKICAgICAgbWV0YTogeyAuLi5tZXRhVGVtcGxhdGUgfSwKICAgIH07CgogICAgY29uc3QgaXRlbUlzTmFOID0gdHlwZSAhPT0gInN0YXR1cyIgJiYgaXNOYU4oY29sdW1uKTsKCiAgICAvLyBpZiBvbmUgaXRlbSBpcyBOYU4gd2Ugc3RvcmUgdGhhdCBpbmZvIHNvIHdlIGNhbiBkZWZhdWx0IGFsbAogICAgLy8gY2FsY3VsYXRlZCB2YWx1ZXMgZm9yIHRoaXMgYnVja2V0IHRvIE5hTgogICAgaWYgKGl0ZW1Jc05hTikgewogICAgICBidWNrZXROYU5JbmZvW2tleV0gPSB7IGhhc05hTjogdHJ1ZSB9OwogICAgICBidWNrZXROYU5JbmZvW3RvdGFsS2V5XSA9IHsgaGFzTmFOOiB0cnVlIH07CgogICAgICAvLyBzZXQgYWxsIHZhbHVlcyBmb3IgdGhpcyBidWNrZXQgdG8gTmFOCiAgICAgIGJ1Y2tldHNba2V5XSA9IHsgLi4ubmFuT2JqLCB0aXRsZSB9OwogICAgICBidWNrZXRzW3RvdGFsS2V5XSA9IHsgLi4ubmFuT2JqLCB0aXRsZSB9OwogICAgICBjb250aW51ZTsKICAgIH0KCiAgICAvLyB3ZSBjaGVjayBpZiB3ZSBzaG91bGQgc2tpcCBjYWxjdWxhdGlvbiBmb3IgdGhlc2UgYnVja2V0cwogICAgY29uc3Qgc2tpcEJ1Y2tldCA9IHNob3VsZFNraXBCdWNrZXQoYnVja2V0TmFOSW5mbywga2V5KTsKICAgIGNvbnN0IHNraXBTdWJUb3RhbCA9IHNob3VsZFNraXBCdWNrZXQoYnVja2V0TmFOSW5mbywgdG90YWxLZXkpOwoKICAgIGlmICghc2tpcEJ1Y2tldCkgewogICAgICBidWNrZXQuc3VtID0gbWF5YmVBZGQoYnVja2V0LnN1bSwgY29sdW1uLCB0eXBlKTsKICAgICAgdXBkYXRlTWF4RGVjaW1hbE1ldGFJbmZvKHsgY29sdW1uVHlwZSwgY29sdW1uLCBidWNrZXQgfSk7CiAgICB9CiAgICBpZiAoIXNraXBTdWJUb3RhbCkgewogICAgICBzdWJUb3RhbEJ1Y2tldC5zdW0gPSBtYXliZUFkZChzdWJUb3RhbEJ1Y2tldC5zdW0sIGNvbHVtbiwgdHlwZSk7CiAgICAgIHVwZGF0ZU1heERlY2ltYWxNZXRhSW5mbyh7IGNvbHVtblR5cGUsIGNvbHVtbiwgYnVja2V0OiBzdWJUb3RhbEJ1Y2tldCB9KTsKICAgIH0KICAgIGlmICghdG90YWxOYU5JbmZvLmhhc05hTikgewogICAgICB0b3RhbC5zdW0gPSBtYXliZUFkZCh0b3RhbC5zdW0sIGNvbHVtbiwgdHlwZSk7CiAgICAgIHVwZGF0ZU1heERlY2ltYWxNZXRhSW5mbyh7IGNvbHVtblR5cGUsIGNvbHVtbiwgYnVja2V0OiB0b3RhbCB9KTsKICAgIH0KCiAgICBpZiAoIWlzTmFOKE51bWJlcihjb2x1bW4pKSkgewogICAgICBpZiAoIXNraXBCdWNrZXQpIHsKICAgICAgICBidWNrZXQubWF4ID0gbWF0aFN0cmluZ01heChidWNrZXQubWF4LCBjb2x1bW4pOwogICAgICAgIGJ1Y2tldC5taW4gPSBtYXRoU3RyaW5nTWluKGJ1Y2tldC5taW4sIGNvbHVtbik7CiAgICAgIH0KICAgICAgaWYgKCFza2lwU3ViVG90YWwpIHsKICAgICAgICBzdWJUb3RhbEJ1Y2tldC5tYXggPSBtYXRoU3RyaW5nTWF4KHN1YlRvdGFsQnVja2V0Lm1heCwgY29sdW1uKTsKICAgICAgICBzdWJUb3RhbEJ1Y2tldC5taW4gPSBtYXRoU3RyaW5nTWluKHN1YlRvdGFsQnVja2V0Lm1pbiwgY29sdW1uKTsKICAgICAgfQogICAgfQogICAgaWYgKCFza2lwQnVja2V0KSB7CiAgICAgIHRyeSB7CiAgICAgICAgYnVja2V0Lml0ZW1zLnB1c2goaXRlbSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmUoeyBidWNrZXQsIGJ1Y2tldE1ldGE6IGJ1Y2tldE5hTkluZm8sIGtleSB9KTsKICAgICAgfQogICAgfQogICAgaWYgKCFza2lwU3ViVG90YWwpIHsKICAgICAgdHJ5IHsKICAgICAgICBzdWJUb3RhbEJ1Y2tldC5pdGVtcy5wdXNoKGl0ZW0pOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lKHsgc3ViVG90YWxCdWNrZXQsIGJ1Y2tldE1ldGE6IGJ1Y2tldE5hTkluZm8sIHRvdGFsS2V5IH0pOwogICAgICB9CiAgICB9CgogICAgYnVja2V0c1trZXldID0gYnVja2V0OwogICAgYnVja2V0c1t0b3RhbEtleV0gPSBzdWJUb3RhbEJ1Y2tldDsKICB9CgogIGZvciAoY29uc3QgW2J1Y2tldCwgdmFsdWVzXSBvZiBPYmplY3QuZW50cmllcyhidWNrZXRzKSkgewogICAgaWYgKHNob3VsZFNraXBCdWNrZXQoYnVja2V0TmFOSW5mbywgYnVja2V0KSkgewogICAgICBjb250aW51ZTsKICAgIH0KICAgIGNhbGN1bGF0ZU1lYW4odmFsdWVzLCB2YWx1ZXMuaXRlbXMpOwoKICAgIGNhbGN1bGF0ZU1lZGlhbih2YWx1ZXMsIHZhbHVlcy5pdGVtcyk7CiAgICBidWNrZXRzW2J1Y2tldF0gPSB2YWx1ZXM7CiAgfQogIGNvbnN0IHRvdGFsSGFzTmFOID0gdG90YWxOYU5JbmZvLmhhc05hTjsKCiAgaWYgKHRvdGFsSGFzTmFOKSB7CiAgICB0b3RhbCA9IHsgLi4udG90YWwsIC4uLm5hbk9iaiB9OwogIH0gZWxzZSB7CiAgICBjYWxjdWxhdGVNZWFuKHRvdGFsLCBjb3B5KTsKICAgIGNhbGN1bGF0ZU1lZGlhbih0b3RhbCwgY29weSk7CiAgfQoKICBmb3IgKGNvbnN0IGl0ZW0gb2YgY29weSkgewogICAgY29uc3QgeyBjb2x1bW4gfSA9IGl0ZW07CiAgICBpZiAoaXNOYU4oTnVtYmVyKGNvbHVtbikpKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgY29uc3QgbnVtQ29sID0gTnVtYmVyKGNvbHVtbik7CiAgICBjb25zdCBrZXkgPSBgJHtpdGVtLmNhdGVnb3J5VHlwZX0tJHtpdGVtLnJlc3VsdFR5cGV9YDsKICAgIGNvbnN0IHRvdGFsS2V5ID0gYCR7aXRlbS5jYXRlZ29yeVR5cGV9LXRvdGFsYDsKICAgIGNvbnN0IGJ1Y2tldCA9IGJ1Y2tldHNba2V5XTsKICAgIGNvbnN0IHN1YlRvdGFsQnVja2V0ID0gYnVja2V0c1t0b3RhbEtleV07CiAgICBjb25zdCBkaWZmQnVja2V0ID0gbnVtQ29sIC0gYnVja2V0LmF2ZzsKICAgIGNvbnN0IGRpZmZTdWJUb3RhbCA9IG51bUNvbCAtIHN1YlRvdGFsQnVja2V0LmF2ZzsKICAgIGNvbnN0IGRpZmZUb3RhbCA9IG51bUNvbCAtIHRvdGFsLmF2ZzsKICAgIHRvdGFsLnZhcmlhbmNlICs9IE1hdGgucG93KGRpZmZUb3RhbCwgMik7CiAgICBidWNrZXQudmFyaWFuY2UgKz0gTWF0aC5wb3coZGlmZkJ1Y2tldCwgMik7CiAgICBzdWJUb3RhbEJ1Y2tldC52YXJpYW5jZSArPSBNYXRoLnBvdyhkaWZmU3ViVG90YWwsIDIpOwogIH0KCiAgY29uc3QgdG90YWxIYXNOZWdJbmYgPSBOdW1iZXIodG90YWwubWluKSA9PT0gLUluZmluaXR5OwogIGNvbnN0IHRvdGFsSGFzUG9zSW5mID0gTnVtYmVyKHRvdGFsLm1heCkgPT09IEluZmluaXR5OwogIHRvdGFsLnN0ZGV2ID0gY2FsY3VsYXRlU3RkZXYoCiAgICB0b3RhbEhhc05lZ0luZiwKICAgIHRvdGFsSGFzUG9zSW5mLAogICAgdG90YWwudmFyaWFuY2UsCiAgICBjb3B5Lmxlbmd0aCwKICApOwoKICBmb3IgKGNvbnN0IFtidWNrZXQsIHZhbHVlc10gb2YgT2JqZWN0LmVudHJpZXMoYnVja2V0cykpIHsKICAgIGlmIChzaG91bGRTa2lwQnVja2V0KGJ1Y2tldE5hTkluZm8sIGJ1Y2tldCkpIHsKICAgICAgZm9yIChjb25zdCBba2V5LCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlcykpIHsKICAgICAgICB2YWx1ZXNba2V5XSA9IHZhbC50b1N0cmluZygpOwogICAgICB9CiAgICAgIGJ1Y2tldHNbYnVja2V0XSA9IHZhbHVlczsKICAgICAgY29udGludWU7CiAgICB9CiAgICBjb25zdCB2YWx1ZXNIYXZlTmVnSW5mID0gTnVtYmVyKHZhbHVlcy5taW4pID09PSAtSW5maW5pdHk7CiAgICBjb25zdCB2YWx1ZXNIYXZlUG9zSW5mID0gTnVtYmVyKHRvdGFsLm1heCkgPT09IEluZmluaXR5OwogICAgdmFsdWVzLnN0ZGV2ID0gY2FsY3VsYXRlU3RkZXYoCiAgICAgIHZhbHVlc0hhdmVOZWdJbmYsCiAgICAgIHZhbHVlc0hhdmVQb3NJbmYsCiAgICAgIHZhbHVlcy52YXJpYW5jZSwKICAgICAgdmFsdWVzLml0ZW1zLmxlbmd0aCwKICAgICk7CgogICAgZm9yIChjb25zdCBba2V5LCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlcykpIHsKICAgICAgaWYgKGtleSA9PT0gIm1ldGEiKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgdmFsdWVzW2tleV0gPSB2YWwudG9TdHJpbmcoKTsKICAgIH0KICAgIC8vIGNsZWFyaW5nIG1lbW9yeQogICAgZGVsZXRlIHZhbHVlcy5pdGVtczsKICAgIGRlbGV0ZSB2YWx1ZXMudmFyaWFuY2U7CiAgICBidWNrZXRzW2J1Y2tldF0gPSB2YWx1ZXM7CiAgfQoKICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0b3RhbCkpIHsKICAgIGlmIChrZXkgPT09ICJtZXRhIikgewogICAgICBjb250aW51ZTsKICAgIH0KICAgIHRvdGFsW2tleV0gPSB2YWx1ZS50b1N0cmluZygpOwogIH0KCiAgZGVsZXRlIHRvdGFsLml0ZW1zOwogIGRlbGV0ZSB0b3RhbC52YXJpYW5jZTsKCiAgY29uc3QgcmVzdWx0ID0geyBjb2x1bW5UeXBlLCB0b3RhbCwgLi4uYnVja2V0cyB9OwogIHBvc3RSZXN1bHQocmVzdWx0LCB0cmFuc2FjdGlvbik7Cn07Cgpjb25zdCBwb3N0UmVzdWx0ID0gKHJlc3VsdCwgdHJhbnNhY3Rpb24pID0+IHsKICAvLyBoYW5kbGluZyBpbiB0ZXN0cwogIGlmICh0aGlzLm1vY2tlZFBvc3RNZXNzYWdlKSB7CiAgICB0aGlzLm1vY2tlZFBvc3RNZXNzYWdlKHsgcmVzdWx0LCB0cmFuc2FjdGlvbiB9KTsKICAgIHJldHVybjsKICB9CiAgcG9zdE1lc3NhZ2UoeyByZXN1bHQsIHRyYW5zYWN0aW9uIH0pOwp9Owo=";

export { stats };
